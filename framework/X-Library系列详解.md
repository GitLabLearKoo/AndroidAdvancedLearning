# X-Library系列详解

> 自2017年初开始，我就致力于Android应用框架的研究，到2018年开始在Github上陆续开源系列作品，再到2019年收获我的第一个star过千的项目，期间我付出了很多，失去了很多，同时也获得了很多。

## 前言

为了能够让更多的人了解到我的开源项目，我也是使出了浑身解数，写了不少文章和文档来提高项目的曝光率，不过在这期间我也发现了不少问题：读者的水平参差不齐，以往我写的文章都是建立在有一定开发基础之上的，这就导致了很多新手小白、学生党看不懂，不会用，瞎折腾，这完全违背了我的初衷。我希望我的开源项目不仅能够服务那些有一定开发经验的人，还能帮助那些热爱Android的人学习并提升自己的开发水平，早日能够跟上我们的步伐。

在接下来的数月里，我将一一详细讲解我开源的几个热门项目，介绍他们所使用的场景，解决的问题以及分析其中实现的逻辑。

## 概述

> 所有的技术框架都必须服务于实际生产，否则就是耍流氓。

我一直认为这世上没有绝对完美的事物，当然技术也并不例外。在做Android的最初几年里，我一直认为技术是产品的灵魂，用于创造产品而又高于产品，是无可替代的，这也是我初期为何执着于技术的原因。渐渐地，当一项技术趋于成熟的时候，你会发现其实技术也并不是想象中的那么重要，同样的功能或是产品，你可以用2种或者更多的技术方案来实现，这个时候你才会发现，原来技术也如同资本、人力、市场和物料等资源，只是我们实现目的的工具而已。

其实`X-Library`正是我早期做Android开发过程中积累沉淀下来的技术经验，并通过我后期不断完善之后形成的。虽说可能不及大厂和google爸爸他们开源的项目那么牛掰，不过相信我，这些框架都是在实际生产中诞生出来的优秀项目，相比大厂和google爸爸他们开源的项目，他们可能更适合中小企业或者独立开发者的你使用哦！

下面是`X-Library`的思维导图：

![](../img/x_library.png)

## 基础组件

### XPage

> 一个非常方便的fragment页面框架

XPage是我开源的第一个项目，也是最实用、最方便的项目之一。设计的初衷是希望能做一个通用的Activity作为壳，Fragment作为页面填充展示，并且能够实现自由的切换和数据交互。

#### 设计原由

当初做Android开发时每当我写一个页面，都需要创建一个Activity，并且还需要在manifest中注册一堆Activity信息，这样既不方便，而且对资源的开销也比较大。因此当时我就设想能否创造出一个通用万能的Activity容器，可以全权负责Fragment的切换展示和数据交互，只需要一行代码即可完成所有的操作，还不需要自己手动去注册，可以一键生成。

#### 设计思路

刚开始的时候真的很难，没有什么好的思路，最初只是简单封装了一个Activity，通过传入一些key值从而获取并加载对应的fragment，类似`ARouter`中Fragment发现那种。其实这样做并没有解决一个容器的问题，而且页面切换也不是很灵活，不够通用，使用起来也不是很方便。

突然有一天我发现Github上有个开源项目[CorePage](https://github.com/lizhangqu/CorePage/)写得非常好，完美地解决了我对一个Activity容器的问题，于是我决定仔细研究其代码，并在其基础上设计出了XPage的最初版本。

就在XPage正式投入使用的过程中，我发现还是存在不少问题的：

* 1.对外API不够灵活，使用起来不够方便；

* 2.每个Fragment仍需要手动注册，很麻烦；

对于API不够灵活的问题，我在之后的版本中陆续通过构造者模式设计以及Android主题属性等手段解决了。

而对于手动注册的问题，我正是借鉴了ARouter的思路，通过Android APT技术，从而实现了Fragment信息的自动注册。

#### 解决痛点

* 只需要一个Activity容器就可以实现多个页面的交互。

* Fragment自由切换和数据交互。

* 无需在manifest中注册一堆Activity信息，通过@Page注解一键自动注册。






